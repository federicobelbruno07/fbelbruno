<!DOCTYPE html>
<html>
<head>
    <title>Tabella migranti</title>
</head>
    <style>
        body{
        background-image: url("data:image/jpeg;base64,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");
        background-position-x: center;
        background-size: cover;
        }
        p {
            font-size: 30px;
            padding-top: 10px;
            color: white;
        }
        h1 {
            text-align: center;
            color: white;
            font-size: 30px;
            padding-top: 10px;
        }
        table {
            width: 40%;
            margin-left: 30%;;
            padding-top: 10px;
            border-collapse: collapse;
        }
        table, th, td {
            border: 3px solid white;
            font-weight: bold;
            font-size: 30px;
            color:white;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        canvas {
            display: block;
            margin: 20px auto;
            border: 2px solid rgb(255, 255, 255);
            background-color: rgb(255, 255, 255);
        }
    </style>
</head>
<body>
    <h1>Tabella migranti</h1>
    <p>
    Inserire il file:
    </p>
    <input type="file" onchange="readFile(this)" accept=".csv">
    <table id="tabellaCSV"></table>
    <p>Nel grafico Ã¨ rappresentata la curva degli sbarchi dei migranti dal 1997 fino al 2020</p><br>
    <p>X: Anni, Y: Numero sbarchi</p><br>
    <canvas id="Canvas" width="500" height="300" ></canvas>
   <script>
        // Leggi dati file e crea tabella
        function leggiTabella(input) {
            let file = input.files[0];
            let reader = new FileReader();
            reader.readAsText(file);
            reader.onload = function() {
                let risultato = reader.result;
                const risultatoSplit = risultato.split("\n");
                const table = document.getElementById('tabellaRisultati').getElementsByTagName('tbody')[0];
                const anni = [];
                const sbarchi = [];
                for (let i = 0; i < risultatoSplit.length; i++) {
                    if (risultatoSplit[i].trim() !== "") {
                        let newRow = table.insertRow();
                        let cell1 = newRow.insertCell(0);
                        let cell2 = newRow.insertCell(1);
                        const split = risultatoSplit[i].split(",");
                        const anno = split[0].slice(1, -1);
                        const sbarco = split[1].slice(1, -1);
                        cell1.textContent = anno;
                        cell2.textContent = sbarco;
                        if (i != 0){
                            anni.push(anno);
                            sbarchi.push(sbarco);
                        }
                    }
                }
                disegnaGrafico(anni, sbarchi);
            }
        }

        // Grafico
        function disegnaGrafico(anni, sbarchi) {
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const margin = 50;
            const width = canvas.width - margin * 2;
            const height = canvas.height - margin * 2;
            const maxSbarchi = Math.max(...sbarchi);

            // X & Y
            ctx.beginPath();
            ctx.moveTo(margin, margin);
            ctx.lineTo(margin, canvas.height - margin);
            ctx.lineTo(canvas.width - margin, canvas.height - margin);
            ctx.stroke();

            ctx.font = "12px Arial";
            ctx.textAlign = "center";
            for (let i = 0; i < anni.length; i++) {
                const x = margin + (i * (width / (anni.length - 1)));
                ctx.fillText(anni[i], x, canvas.height - margin + 20);
            }

            ctx.textAlign = "right";
            for (let i = 0; i <= 5; i++) {
                const y = canvas.height - margin - (i * (height / 5));
                const valore = Math.round((maxSbarchi / 5) * i);
                ctx.fillText(valore, margin - 10, y);
            }

            // Linea in tempo reale
            let i = 0;
            function disegnaInTempoReale() {
                ctx.lineWidth = 3;
                const x = margin + (i * (width / (anni.length - 1)));
                const y = canvas.height - margin - (sbarchi[i] / maxSbarchi * height);

                if (i === 0) {
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                    ctx.strokeStyle = "blue";
                    ctx.stroke();
                }

                i++;
                setTimeout(disegnaInTempoReale, 300);
            }
            disegnaInTempoReale();
        }
    </script>
</body>
</html>
